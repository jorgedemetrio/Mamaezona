                                wbAMP changelog                                 

                        (2018-05-16 17:45 - build #790)                         



--------------------------------------------------------------------------------
 [ 2018-05-16 ] Version 1.12.0
--------------------------------------------------------------------------------


    [new]    Added basic Hikashop support.
    [new]    Contact form can now perform an real redirect after form
             submission instead of displaying a 'Next' button

    [chg]    Protect against PHP issue when content has javascript inlined
             that contains HTML content. Sometimes some of the Javascript/HTML
             content remains on the AMP page.
    [chg]    Page images are now required to be on the page itself, 1200px in
             widht and 800,000 pixels minimum. Removed Fallback image feature.
    [chg]    White list all amp-* elements to allow for more advanced custom
             usage of new AMP elements.
    [chg]    Updated translations for German, Spanish, French, Italian,
             Portuguese and Russian
    [chg]    Disallow p, div and span as direct children of an amp-accordion
    [chg]    Allow json+ld script in page body
    [chg]    Added support for srcset (responsive images) to route helper
    [chg]    Prevent fatal error when using J! 3.6.5 or earlier.

    [bug]    Modules in AMP-specific positions may be incorrectly rendered if
             several modules have the exact same title but are published in
             different positions.
    [bug]    Selected category may not be AMPlified if in category/categories
             views.
    [bug]    Layout query variable may be overriden under some circumstances
    [bug]    Canonical URL may have a double-trailing slash on home page, if
             AMP
    [bug]    Content plugins set to be disabled are also disabled on non-AMP
             pages
    [bug]    Editor plugin javascript can interfere with other plugins


--------------------------------------------------------------------------------
 [ 2017-09-26 ] Version 1.11.0
--------------------------------------------------------------------------------


    [new]    Added support for AMP Analytics Client ID API
    [new]    Added meta tag and CSS class to disable ads display selectively
             per page

    [chg]    Removed all content selection rules based on task variable
    [chg]    All filters are now available also in Community edition
    [chg]    Now adding description field to json-ld meta data
    [chg]    CSS to prevent pre HTML elements to be wider than page, without
             scrollbars
    [chg]    Allow the expanded attribute on section, needed by amp-accordion

    [bug]    Not AMPlifying links marked with wbamp-link class when menu is in
             one of the custom AMP modules positions
    [bug]    When selecting views per component, some selections are lost
             after saving settings
    [bug]    Captcha verification needs to be disabled, or else com_contact
             fails to accept contact form
    [bug]    AMP validation errors if contact details are displayed on the
             Joomla contact form


--------------------------------------------------------------------------------
 [ 2017-08-02 ] Version 1.10.1
--------------------------------------------------------------------------------


    [bug]    Cannot select view per component, except for com_content, when
             installing wbAMP for the first time
    [bug]    Fatal error when upgrading community version to 1.10.0


--------------------------------------------------------------------------------
 [ 2017-08-01 ] Version 1.10.0
--------------------------------------------------------------------------------


    [new]    Added wbamp-top and wbamp-bottom modules positions: can now
             simply include modules on AMP pages
    [new]    Added a filter on whether current request should be amplified or
             not.
    [new]    Added wbamp_on_content_prepare filter

    [chg]    Center page counter on pagination block
    [chg]    Move disabling of content plugins to onAfterRoute, better
             compatibility
    [chg]    Content max width set in Taylor theme is now used to resize
             images as well. Also, added a filter for this value.
    [chg]    When AMP is forced on mobiles, still comply with user set page
             exclusions or display a 404

    [bug]    Possible warning on AMP validation when using User notification.
    [bug]    Views from some components cannot be displayed and selected -
             thanks Marcin@DJ-Classifieds
    [bug]    Unable to select multiple views for a component
    [bug]    DoubleClick ads not displayed when inserted through a
             tag/shortcode in content
    [bug]    PHP warnings if Any Category or Any Itemid is selected in
             parameters.
    [bug]    Possible fatal error when reading a jpg remote file dimensions


--------------------------------------------------------------------------------
 [ 2017-06-06 ] Version 1.9.2
--------------------------------------------------------------------------------


    [bug]    K2 views cannot be selected using the new interface


--------------------------------------------------------------------------------
 [ 2017-06-01 ] Version 1.9.1.686
--------------------------------------------------------------------------------


    [bug]    Default template might be selected, regardless of template
             assignment


--------------------------------------------------------------------------------
 [ 2017-06-01 ] 1.9.0
--------------------------------------------------------------------------------


    [new]    Completely rewritten page selection, much simpler and much more
             powerful
    [new]    Force mobile on AMP: allow select phone and/or tablets
    [new]    Added support Joomla Contact Us component - closes #132
    [new]    Added an AMP-for-mobile mode: all mobile visitors are shown the
             AMP version of a page - close #85
    [new]    Added ability to read remote image dimensions, manually adding
             dimensions no longer required

    [chg]    Added a filter to override 'Force AMP on mobile'
    [chg]    Now handling cases where a custom layout is used for a menu item
             (was causing normal template to be used on AMP pages, instead of
             wbAMP template)
    [chg]    Workaround for Joomla issue 15805: poorly laid out article author
             and date

    [bug]    Notice error caused by ads display on 404 AMP errors page
    [bug]    Menu is not displayed on 404 AMP error pages
    [bug]    Fallback and placeholder in ads tags are not displayed - close
             #141
    [bug]    Useless display from Disqus plugin are not removed from AMP pages
             (View comments,...)


--------------------------------------------------------------------------------
 [ 2017-05-02 ] Version 1.8.0
--------------------------------------------------------------------------------


    [new]    Added support for Disqus commenting on AMP pages - closes #113

    [chg]    Better escaping of json-ld during AMP conversion, now accepts
             URls with ampersands
    [chg]    Simplified selection of pages to AMPlifiy - closes #130
    [chg]    Now using generic "WebPage" item type on all pages except
             singular (com_content article, K2 item) - closes #129

    [bug]    Border attribute on table element can only have a value of
    [bug]    Also remove "Blog" itemtype attributes on categories pages,
             invalid on AMP - closes #128
    [bug]    Incorrect processing of AMP URLS when site is installed in a
             folder, some parts of the URL may be missing


--------------------------------------------------------------------------------
 [ 2017-02-24 ] Version 1.7.0
--------------------------------------------------------------------------------


    [new]    Disable content and system plugins from wbAMP settings

    [chg]    amp-video tags now require a separate script file (was built-in
             until mid-january)
    [chg]    Prevent Artio SEF to execute AMP URL parsing multiple times
    [chg]    Updated Google Tag Manager AMP snippet to latest version
    [chg]    link elements are allowed to lack a rel attribute
    [chg]    Do not remove links with empty href attributes, instead replace
             the href with #0

    [bug]    Page selection: don't stop on first rule that fails for a given
             component, there might be more rules set
    [bug]    Incorrect rel=amphtml link for URLs with query strings
    [bug]    Rules number 3 and more are not taken into account
    [bug]    Fatal error, call to a member function set(), when viewing some
             extensions AMP pages
    [bug]    Links are removed if they are created with will non-sef syntax:
             &id=2:article-name, as the : is seen as a (invalid) protocol -
             closes #121
    [bug]    Invalid controls attribute on amp-video tag


--------------------------------------------------------------------------------
 [ 2016-10-31 ] Version 1.6.0
--------------------------------------------------------------------------------


    [new]    Added support for Google Tag Manager
    [new]    Implemented white list protocol filtering

    [chg]    Now removing meta tag if they have the charset attribute
    [chg]    No they can't.
    [chg]    Buttons can have an href attibute
    [chg]    Improved sanitization of tags dimensions: filter ouy anything but
             integers and px as width/height dimensions
    [chg]    Improved handling of href values, including empty ones and using
             void(0)
    [chg]    Better layout and colors for ads
    [chg]    Now removing voting on content, J! output is not valid structured
             data, thus beaking amp SD validation
    [chg]    Now allowing the meta html tag (but remove the http-equiv
             attribute
    [chg]    Now removing entirely link tags when they miss a rel attribute

    [bug]    All ads embedded with an embed tag get the same HTML id
    [bug]    Notice error if user created a meta data image tag, but didn't
             supply any URL
    [bug]    Article content can be empty on community version
    [bug]    Incorrect height value when displaying an auto-displaying an
             embedded Facebook post


--------------------------------------------------------------------------------
 [ 2016-08-25 ] Version 1.5.0
--------------------------------------------------------------------------------


    [new]    Added support for Analytics event tracking (click, scroll) -
             closes #68
    [new]    Added support for right-side sliding menu - closes #95
    [new]    Added page cleanup feature: remove elements on AMP page based on
             CSS classes or CSS id - closes #96
    [new]    Added support for inserting tags in content to display multiple
             ads and network - closes #97
    [new]    Added connector to obtain Structured data from sh404SEF

    [chg]    Now truncating structured data headline field to its maximum, 100
             characters
    [chg]    Do not escape slashes in json-ld output
    [chg]    Now also reading image size for images with protocol-relative
             links (eg //path/to/image.jp) - close #103
    [chg]    Joomla 3.6.1 now using popover instead of tooltips in backend.
             Adjusted our custom tips - closes #101
    [chg]    If no dataModified exists, use datePublished instead. Workaround
             bug in Google Structured Data validator


--------------------------------------------------------------------------------
 [ 2016-07-19 ] Version 1.4.2
--------------------------------------------------------------------------------


    [bug]    Some Joomla pagination links may not be AMPlified, even if set to
             in config


--------------------------------------------------------------------------------
 [ 2016-07-19 ] Version 1.4.1
--------------------------------------------------------------------------------


    [chg]    Added support for wbAMP themes one-click update


--------------------------------------------------------------------------------
 [ 2016-07-19 ] Version 1.4.0
--------------------------------------------------------------------------------


    [new]    Added styling and handling of category blog pagination - closes
             #83
    [new]    Now handling multi-page article pager (prev-next)
    [new]    Option to set regular expressions for AMP page cleanup. Comes
             with defaults for Regularlabs Sourcerer, Slider, Tabs,Modals,
             Modules Anywhere,Snippets, Tips, RSForm, Chronoforms, WidgetKit,
             Simple Image Gallery, PhocaGallery - closes #93
    [new]    Now also handling multipage article pagination - closes #91
    [new]    Now loading amp-ad javascript, changed in AMP specification -
             closes #89
    [new]    Now disabling PageSpeed on AMP page (with header) - closes #90
    [new]    Implemented amp-sidebar component, replaces built-in CSS menu -
             closes #86

    [chg]    Added support for RTL documents
    [chg]    In case of missing update keys, now redirecting back to update
             page with a clear message.

    [bug]    Header image may be cropped if larger than document size - fixes
             #88
    [bug]    Incorrect double / at the end of canonical link on AMP category
             pages


--------------------------------------------------------------------------------
 [ 2016-05-18 ] Version 1.3.1.490
--------------------------------------------------------------------------------


    [bug]    AMP page for URLs ending with a trailing slash give a 404


--------------------------------------------------------------------------------
 [ 2016-05-18 ] Version 1.3.0.485
--------------------------------------------------------------------------------


    [new]    Added connector to sh404SEF 404 error page with similar URLs,
             when in standalone mode
    [new]    Added error page display when running in standalone mode
    [new]    Now adding shortlink information to page, obtained from sh404SEF
             when present
    [new]    Added a standalone mode: creates a site that is fully AMPlified,
             with no regular HTML counterpart - closes #47
    [new]    Added a development mode, to setup AMP before letting Google know
             - closes #74
    [new]    Added a system check for presence of publisher name and logo URL
             - closes #71
    [new]    Added theme selector
    [new]    Added ability to use color and layouts themes for the AMP output
    [new]    Added API to collect alternate layouts for rendering the page
    [new]    Added mobile-style, hamburger icon and sliding-in menu - closes
             #79

    [chg]    Also make sure page title and description are collected from
             sh404SEF, available
    [chg]    Added support for sh404SEF robots tag
    [chg]    Now disabling Joomla caching on AMP pages, to be sure our
             template overrides are used
    [chg]    Restored user ability to zoom - closes #76
    [chg]    Updated default theme CSS, vertical centering in header and
             footer

    [bug]    emailcloak=off not removed under some circumstances, on community
             edition
    [bug]    Correct ordering of wbAMP, shLib and sh404SEF not always forced
             by installation script
    [bug]    Invalid dateModified date created if no modification date exist
             in Joomla! content
    [bug]    404 on AMP URLS with right-to-left languages aliases, or URL
             encoded content
    [bug]    rel=amphtml are absolute but not fully qualified - closes #73


--------------------------------------------------------------------------------
 [ 2016-04-20 ] Version 1.2.0.400
--------------------------------------------------------------------------------


    [new]    Now disabling NewRelic agent if detected on the server, as it
             breaks AMP validation by inserting scrip tags in page - closes
             #70
    [new]    New design for tooltips, now permanently displayed instead of
             having to hover a setting label
    [new]    Added custom ads network handling, so that you can use any
             AMP-approved ads network - closes #64
    [new]    Added an editor plugin, to easily enter AMP tags in any Joomla
             content - closes #54
    [new]    Added templates overrides for some com_tags output, as Joomla
             output is not valid AMP - closes #63
    [new]    Add email and mailto links protection in AMP pages - Closes #5
    [new]    Added a fallback image setting, used when no other image has been
             set or found in an AMP page.
    [new]    Added date_modified and date_published custom meta tags, to allow
             manually setting those dates. Closes #49
    [new]    Added configuration checks to display most common issues
             preventing AMP validation in the plugins settings - closes #51

    [chg]    Remove CDATA in some script tags, as amp-analytics and
             amp-social-share (incorrectly) don't accept them
    [chg]    Now removing some tag based on whether their parent is on a
             white/black list
    [chg]    Now also removing html elements when they don't have a require
             attribute
    [chg]    Now allowing application/json scripts, to account for manually
             created content - closes #69
    [chg]    More system checks: custom css - closes #65
    [chg]    Remove useless #13 characters added at some end of lines by PHP
    [chg]    Updated per tag valid attributes rules per latest AMP spec. Same
             for amp-* tags list
    [chg]    Updated valid list of rel attributes with current AMP spec
    [chg]    Updated Spanish, German and Dutch translations
    [chg]    Stricter validation, now enforcing no itemtype attribute on
             article, section and aside HTML tags - closes #53
    [chg]    Now forcing wbAMP system plugin ordering to -99, so as to be
             before any other template plugins that may highjack the site
             template otherwise

    [bug]    Replace <br></br> tags created by PHP, causing double lines when
             displayed in browsers, with <br /> - fixes #62
    [bug]    Do not prepend base URL on tel: and other links
    [bug]    Do not prepend base URL on mailto links
    [bug]    Script tag not always removed - Closes #56
    [bug]    Should not use JSON_PRETTY_PRINT on PHP 5.3, causes AMP
             validation error
    [bug]    Not fixing plugins ordering at installation if plugins have the
             same ordering
    [bug]    Publisher logo are not made absolute if entered as relative


--------------------------------------------------------------------------------
 [ 2016-03-09 ] Version 1.1.1.316
--------------------------------------------------------------------------------


    [bug]    Packaging error in Community version, com_content plugin is not
             installed


--------------------------------------------------------------------------------
 [ 2016-03-09 ] Version 1.1.0.312
--------------------------------------------------------------------------------


    [new]    Full Romanian translation, partial Dutch translation
    [new]    Added option to select default document type, NewsArticle or
             BlogPosting, and custom meta tag to override the default - closes
             #40
    [new]    Can set a tag in content to change document type, for instance
             "BlogPosting" instead of default "NewsArticle"
    [new]    Added an "All categories" option in com_content categories
             selection parameter. Closes #20
    [new]    Uniform syntax for showing/hiding content on AMP pages:
             wbamp-hide/wbamp-show - closes #30
    [new]    Added a Joomla template to override the overrides in your
             template - Includes default styling for Joomla content
    [new]    Added Portuguese translation
    [new]    Generalize automatically finding size of images if not specified
             by user - closes #31
    [new]    Added a simple API for other extensions to get info about AMP
             status and request - closes #28

    [chg]    Prev/Next buttons may overlap at low width when the display title
             - closes #41
    [chg]    Clear up Article itemtype markup created by Joomla, would cause
             validation error in Google Structured Data test tool
    [chg]    BR tag not cleaned for invalid attribute. Expanded attributes
             white list in accordance to amphtml project rules - closes #42
    [chg]    Improved CSS for prev/next buttons on articles and pagination
    [chg]    AMP URL should have a trailing slash if original URL has it -
             closes #39
    [chg]    Now styling Joomla readmore button. Closes #38
    [chg]    Updated CSS for logo and header text
    [chg]    Italian translation now complete
    [chg]    Add nocache headers if not explicitly set to cache pages. May
             help bypass CDN inserting content in page, breaking AMP
             validation - closes #25

    [bug]    Name attribute used twice in wbam-meta definition for an author.
             Changed to "content"
    [bug]    Missing implementation of set_url_scheme function, cause fatal
             error when content has an iframe and scheme is not set
    [bug]    Rss feeds are not cleaned of custom wbamp tags - closes #23


--------------------------------------------------------------------------------
 [ 2016-02-29 ] Version 1.0.3.233
--------------------------------------------------------------------------------


    [new]    Added Italian and Portuguese (partial) translations, updated
             existing ones
    [new]    Added amp-user-notification - Closes #12
    [new]    Added support for amp-dailymotion tag (Dailymotion video) -
             Closes #8
    [new]    Added ability to use a custom html module as site header Closes
             #3
    [new]    Added new tag, {wbam-no-scrub}, prevents removal of wbamp tags
             (useful to display documentation on wbAMP!)

    [chg]    Added labels on disabled fields in community edition on - closes
             #21
    [chg]    Updated Vine support - closes #19
    [chg]    Added whitelist-based attribute filtering - closes #17
    [chg]    Implemented whitelist based filtering, on top of blacklist, more
             reliable for validation - closes #14
    [chg]    Updated French, German and Russian translations
    [chg]    Changed default width/height of youtube videos, to 16:9
    [chg]    Added rules to remove plusone and g:plusone tags in content, in
             case there some hardcoded directly in content
    [chg]    Prevent execution of some methods in admin
    [chg]    Optimization: don't scrub tags from documents if not html

    [bug]    Typo in link to wbAMP page on community edition
    [bug]    Added raw filters to custom css, custom links, user notification,
             allow raw input to the page
    [bug]    Fix CSS when adding an image header Fixes #7
    [bug]    Fix CSS when adding an image header Fixes #7


--------------------------------------------------------------------------------
 [ 2016-02-23 ] Version 1.0.2.194
--------------------------------------------------------------------------------


    [new]    Added full French translation, partial German and Russian

    [chg]    Some minor name changes to accomodate JED requirements

    [bug]    Hide content tags don't work on AMP pages


--------------------------------------------------------------------------------
 [ 2016-02-23 ] Version 1.0.1.181
--------------------------------------------------------------------------------


    [new]    Added support for K2 content items

    [chg]    Added files for translations (no translation yet -
             BG,DE,ES,FR,NL,RO,RU,SV)
    [chg]    Improved K2 category handling, now can extract it from item id
    [chg]    Now using default Weeblr theme in backend
    [chg]    Refactored auto-embedding of URL, more reliabel with fancy URLs
    [chg]    Added test for sh404SEF presence in SEF test and message
    [chg]    Now also postprocessing module used to create carousel content
    [chg]    Updated to latest boilerplate code
    [chg]    Now using the first image found in content to represent the page,
             if none set by user or otherwise
    [chg]    Move init code to system plugin constructor, needed for wbAmp
             compat

    [bug]    Should not remove wbamp-embed tags on non-amp pages
    [bug]    Not always removing wbamp-meta tags
    [bug]    Make sure user created footer module is AMP-compliant
