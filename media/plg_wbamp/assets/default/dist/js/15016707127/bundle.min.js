/*! Copyright Weeblr llc 2017 - Licence: http://www.gnu.org/copyleft/gpl.html GNU/GPL */
!function(e,t,n,o){"use strict";function r(){var e=o(this),t=e.data("data_target"),n=o(t);if(!n.length)return void console.error("wbAMP: Target not found after change");var r=e.val();a(r,"#"+e.attr("id"),t,n)}function a(e,t,n,r){return r.empty(),e&&weeblrApp.wbAMPViewsPerComponent.components&&weeblrApp.wbAMPViewsPerComponent.components[e]?(o.each(weeblrApp.wbAMPViewsPerComponent.components[e],function(e,n){var a=weeblrApp.wbAMPViewsPerComponent.selected[t]||[],i=n.name==a||-1!==a.indexOf(n.name),d='<option value="'+n.name+'"'+(i?' selected="selected"':"")+">"+n.display_name+"</option>";r.append(o(d))}),void r.trigger("liszt:updated")):void r.trigger("liszt:updated")}function i(){var e=o(this),t=e.attr("id"),a=e.data("data_source"),i=a?o("#"+a):null;if(!i||!i.length)return void console.error("wbAMP: DataSource not found");i.on("change",r),i.data("data_target","#"+t);var d=n.getElementById(a);r.bind(d)()}function d(e){o(e).each(i)}function c(){try{d(".wb-dynamic-list")}catch(e){console.log("Error setting up dynamic list: "+e.message)}}return o(n).ready(c),e}(window.weeblrApp=window.weeblrApp||{},window,document,jQuery);
